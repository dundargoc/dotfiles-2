---
- name: Clone tree-sitter-java repo
  git:
    repo: https://github.com/tree-sitter/tree-sitter-java
    dest: ~/dev/tree-sitter/tree-sitter-java
    version: ee0a2a076785145e350fbd413775d1e003f79315
- name: Clone tree-sitter-python repo
  git:
    repo: https://github.com/tree-sitter/tree-sitter-python
    dest: ~/dev/tree-sitter/tree-sitter-python
    version: 58f57240834d6b88624e32ad0ab9531d55fb7a5d
- name: Clone tree-sitter-lua repo
  git:
    repo: https://github.com/Azganoth/tree-sitter-lua
    dest: ~/dev/Azganoth/tree-sitter-lua
    version: d835774e14fd7073567358cdb8900c6012ea5eef
- name: Ensure nvim parser folder exists
  file:
    path: ~/.config/nvim/parser/
    state: directory
    mode: '0755'
- name: Generate java parser
  command: cc -O2 -o ~/.config/nvim/parser/java.so -shared src/parser.c -I./src
  args:
    chdir: ~/dev/tree-sitter/tree-sitter-java

- name: Generate python parser
  command: cc -O2 -o ~/.config/nvim/parser/python.so -shared src/parser.c -I./src
  args:
    chdir: ~/dev/tree-sitter/tree-sitter-python

- name: Generate lua parser
  command: cc -O2 -o ~/.config/nvim/parser/lua.so -shared src/parser.c -I./src
  args:
    chdir: ~/dev/Azganoth/tree-sitter-lua/
